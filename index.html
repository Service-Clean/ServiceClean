<!DOCTYPE html>
<html>
<head>
    <title>ServiceClean</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f2f5; }
        .header { background: #0a2e4d; color: white; padding: 15px; }
        .nav { margin: 20px 0; }
        .nav button { padding: 10px 20px; margin-right: 5px; cursor: pointer; }
        .nav button.active { background: #0a2e4d; color: white; }
        table { width: 100%; background: white; border-collapse: collapse; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        .add-btn { background: #0a2e4d; color: white; border: none; padding: 10px 20px; cursor: pointer; margin: 10px 0; }
        .delete-btn { background: #dc3545; color: white; border: none; padding: 5px 10px; cursor: pointer; }
        .footer { margin-top: 30px; text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üßº ServiceClean</h1>
    </div>

    <div class="nav">
        <button class="active" onclick="showTab('clients')">–ö–ª–∏–µ–Ω—Ç—ã</button>
        <button onclick="showTab('employees')">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</button>
        <button onclick="showTab('services')">–£—Å–ª—É–≥–∏</button>
        <button onclick="showTab('orders')">–ó–∞–∫–∞–∑—ã</button>
    </div>

    <div id="clients" style="display: block;">
        <button class="add-btn" onclick="addClient()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
        <table id="clientsTable">
            <tr><th>ID</th><th>–§–ò–û</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th><th></th></tr>
            <tr><td colspan="4">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
        </table>
    </div>

    <div id="employees" style="display: none;">
        <button class="add-btn" onclick="addEmployee()">+ –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
        <table id="employeesTable">
            <tr><th>ID</th><th>–§–ò–û</th><th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th><th></th></tr>
            <tr><td colspan="4">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
        </table>
    </div>

    <div id="services" style="display: none;">
        <button class="add-btn" onclick="addService()">+ –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
        <table id="servicesTable">
            <tr><th>ID</th><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–¶–µ–Ω–∞</th><th></th></tr>
            <tr><td colspan="4">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
        </table>
    </div>

    <div id="orders" style="display: none;">
        <button class="add-btn" onclick="addOrder()">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
        <table id="ordersTable">
            <tr><th>ID</th><th>–ö–ª–∏–µ–Ω—Ç</th><th>–°—É–º–º–∞</th><th></th></tr>
            <tr><td colspan="4">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
        </table>
    </div>

    <div class="footer">
        <p>–û–û–û ¬´ServiceClean¬ª ¬© 2026</p>
        <p>–ö–æ–ª–µ—Å–Ω–∏—á–µ–Ω–∫–æ –ê–Ω–∞—Å—Ç–∞—Å–∏—è ¬∑ –ö–æ–±–µ–Ω—è–∫ –ê—Ä–∏–Ω–∞ ¬∑ –ì—Ä—É–ø–ø–∞ –ò–°-22</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabase = supabase.createClient(
            'https://pyojgyasaccwrcdogexx.supabase.co',
            'sb_publishable_db9nx0GejLB8Cw7XNB3ACg_FmTeP-WX'
        );

        function showTab(tab) {
            document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('#clients, #employees, #services, #orders').forEach(d => d.style.display = 'none');
            document.getElementById(tab).style.display = 'block';
            loadData(tab);
        }

        async function loadData(table) {
            const { data } = await supabase.from(table).select('*');
            const tbody = document.getElementById(table + 'Table');
            
            if (!data || data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td></tr>';
                return;
            }

            let html = '';
            data.forEach(item => {
                html += '<tr>';
                html += '<td>' + item.id + '</td>';
                
                if (table === 'clients') html += '<td>' + (item.full_name || '') + '</td><td>' + (item.phone || '') + '</td>';
                if (table === 'employees') html += '<td>' + (item.full_name || '') + '</td><td>' + (item.position || '') + '</td>';
                if (table === 'services') html += '<td>' + (item.name || '') + '</td><td>' + (item.price_per_m2 || 0) + ' ‚ÇΩ</td>';
                if (table === 'orders') html += '<td>' + (item.client_name || '') + '</td><td>' + (item.total_price || 0) + ' ‚ÇΩ</td>';
                
                html += '<td><button class="delete-btn" onclick="deleteItem(\'' + table + '\', ' + item.id + ')">–£–¥–∞–ª–∏—Ç—å</button></td>';
                html += '</tr>';
            });
            tbody.innerHTML = html;
        }

        async function deleteItem(table, id) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å?')) {
                await supabase.from(table).delete().eq('id', id);
                loadData(table);
            }
        }

        async function addClient() {
            const name = prompt('–§–ò–û:');
            if (!name) return;
            const phone = prompt('–¢–µ–ª–µ—Ñ–æ–Ω:');
            await supabase.from('clients').insert([{ full_name: name, phone: phone || '' }]);
            loadData('clients');
        }

        async function addEmployee() {
            const name = prompt('–§–ò–û:');
            if (!name) return;
            const pos = prompt('–î–æ–ª–∂–Ω–æ—Å—Ç—å:');
            await supabase.from('employees').insert([{ full_name: name, position: pos || '' }]);
            loadData('employees');
        }

        async function addService() {
            const name = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ:');
            if (!name) return;
            const price = prompt('–¶–µ–Ω–∞:');
            await supabase.from('services').insert([{ name: name, price_per_m2: parseFloat(price) || 0 }]);
            loadData('services');
        }

        async function addOrder() {
            const client = prompt('–ö–ª–∏–µ–Ω—Ç:');
            if (!client) return;
            const price = prompt('–°—É–º–º–∞:');
            await supabase.from('orders').insert([{ client_name: client, total_price: parseFloat(price) || 0 }]);
            loadData('orders');
        }

        loadData('clients');
    </script>
</body>
</html>
