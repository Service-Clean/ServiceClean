<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ServiceClean ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–ª–∏–Ω–∏–Ω–≥–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f4f7fc;
      color: #1e293b;
      line-height: 1.6;
      padding: 24px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 36px;
      box-shadow: 0 20px 40px -15px rgba(0,0,0,0.1);
      padding: 32px;
    }

    h1 {
      font-size: 2.4em;
      font-weight: 700;
      color: #0b3b5c;
      border-bottom: 4px solid #0b3b5c;
      padding-bottom: 18px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    h1 span {
      background: #0b3b5c;
      color: white;
      font-size: 0.4em;
      padding: 6px 20px;
      border-radius: 50px;
      font-weight: 600;
    }

    h2 {
      color: #0b3b5c;
      margin-bottom: 20px;
      font-size: 1.6em;
      font-weight: 600;
    }

    .user-info {
      background: #f1f5f9;
      padding: 16px 28px;
      border-radius: 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    button {
      background: #0b3b5c;
      color: white;
      padding: 12px 28px;
      border: none;
      border-radius: 40px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      background: #1e4f6e;
      transform: translateY(-2px);
      box-shadow: 0 10px 20px -5px rgba(11,59,92,0.2);
    }

    .btn-outline {
      background: white;
      color: #0b3b5c;
      border: 2px solid #0b3b5c;
    }

    .btn-outline:hover {
      background: #0b3b5c;
      color: white;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: #f8fafc;
      padding: 24px;
      border-radius: 24px;
      text-align: center;
    }

    .stat-value {
      font-size: 2.2em;
      font-weight: 800;
      color: #0b3b5c;
      margin-bottom: 8px;
    }

    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .tab {
      padding: 12px 28px;
      background: #f1f5f9;
      border-radius: 40px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.2s;
    }

    .tab:hover {
      background: #e2e8f0;
    }

    .tab.active {
      background: #0b3b5c;
      color: white;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .data-table th {
      background: #f1f5f9;
      color: #0b3b5c;
      font-weight: 600;
      padding: 14px;
      text-align: left;
    }

    .data-table td {
      padding: 14px;
      border-bottom: 1px solid #e2e8f0;
    }

    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 40px;
      font-size: 0.85em;
      font-weight: 600;
    }

    .badge-success { background: #dcfce7; color: #166534; }
    .badge-warning { background: #fff3cd; color: #856404; }
    .badge-info { background: #dbeafe; color: #1e40af; }

    .qr-section {
      margin: 40px 0;
      text-align: center;
    }

    .qr-toggle {
      background: white;
      color: #0b3b5c;
      border: 2px solid #0b3b5c;
      padding: 14px 36px;
      font-size: 1.1em;
    }

    .qr-container {
      display: none;
      margin-top: 25px;
      padding: 25px;
      background: white;
      border: 3px solid #0b3b5c;
      border-radius: 28px;
      max-width: 340px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .qr-container.show {
      display: block;
    }

    .qr-container img {
      width: 220px;
      height: 220px;
      display: block;
      margin: 0 auto;
      border-radius: 16px;
    }

    .qr-text {
      margin-top: 15px;
      font-weight: bold;
      color: #0b3b5c;
      font-size: 1.2em;
    }

    .qr-link {
      font-size: 12px;
      color: #64748b;
      word-break: break-all;
      margin-top: 10px;
      background: #f1f5f9;
      padding: 8px;
      border-radius: 8px;
    }

    .footer {
      margin-top: 40px;
      padding: 32px;
      background: #f8fafc;
      border-radius: 28px;
      text-align: center;
      color: #475569;
    }

    .action-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .message {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #0b3b5c;
      color: white;
      padding: 16px 24px;
      border-radius: 60px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      üßº ServiceClean 
      <span>–ò–° –¥–ª—è –∫–ª–∏–Ω–∏–Ω–≥–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏</span>
    </h1>

    <!-- –®–∞–ø–∫–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º -->
    <div class="user-info">
      <span id="userStatus">üë§ –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
      <button id="authButton" class="btn-outline">üö™ –í—ã–π—Ç–∏</button>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="totalOrders">24</div>
        <div>–ó–∞–∫–∞–∑–æ–≤ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalRevenue">487 500</div>
        <div>–í—ã—Ä—É—á–∫–∞, ‚ÇΩ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="avgCheck">20 312</div>
        <div>–°—Ä–µ–¥–Ω–∏–π —á–µ–∫, ‚ÇΩ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="profitMargin">35%</div>
        <div>–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å</div>
      </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="tabs" id="tabsContainer">
      <div class="tab active" data-tab="orders">üìã –ó–∞–∫–∞–∑—ã</div>
      <div class="tab" data-tab="clients">üë• –ö–ª–∏–µ–Ω—Ç—ã</div>
      <div class="tab" data-tab="employees">üßë‚Äçüîß –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</div>
      <div class="tab" data-tab="services">üß¥ –£—Å–ª—É–≥–∏</div>
      <div class="tab" data-tab="reports">üìä –û—Ç—á—ë—Ç—ã</div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ó–∞–∫–∞–∑—ã -->
    <div id="tab-orders" class="tab-content">
      <div class="action-bar">
        <h2>üìã –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</h2>
        <button id="newOrderBtn">‚ûï –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
      </div>
      
      <table class="data-table">
        <thead>
          <tr>
            <th>‚Ññ</th>
            <th>–ö–ª–∏–µ–Ω—Ç</th>
            <th>–£—Å–ª—É–≥–∞</th>
            <th>–î–∞—Ç–∞</th>
            <th>–°—É–º–º–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
          </tr>
        </thead>
        <tbody id="orders-list">
          <tr>
            <td>1</td>
            <td>–ò–≤–∞–Ω–æ–≤ –ê.–ü.</td>
            <td>–£–±–æ—Ä–∫–∞ –æ—Ñ–∏—Å–∞</td>
            <td>12.03.2026</td>
            <td>15 000 ‚ÇΩ</td>
            <td><span class="badge badge-success">–í—ã–ø–æ–ª–Ω–µ–Ω</span></td>
            <td>–°–º–∏—Ä–Ω–æ–≤ –î.</td>
          </tr>
          <tr>
            <td>2</td>
            <td>–ü–µ—Ç—Ä–æ–≤–∞ –ú.–°.</td>
            <td>–•–∏–º—á–∏—Å—Ç–∫–∞</td>
            <td>12.03.2026</td>
            <td>8 500 ‚ÇΩ</td>
            <td><span class="badge badge-warning">–í —Ä–∞–±–æ—Ç–µ</span></td>
            <td>–ö–æ–∑–ª–æ–≤–∞ –ï.</td>
          </tr>
          <tr>
            <td>3</td>
            <td>–û–û–û "–†–æ–º–∞—à–∫–∞"</td>
            <td>–ú–æ–π–∫–∞ –æ–∫–æ–Ω</td>
            <td>11.03.2026</td>
            <td>12 000 ‚ÇΩ</td>
            <td><span class="badge badge-success">–í—ã–ø–æ–ª–Ω–µ–Ω</span></td>
            <td>–°–º–∏—Ä–Ω–æ–≤ –î.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ö–ª–∏–µ–Ω—Ç—ã -->
    <div id="tab-clients" class="tab-content" style="display: none;">
      <div class="action-bar">
        <h2>üë• –ë–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
        <button id="newClientBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
      </div>
      
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–§–ò–û</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>Email</th>
            <th>–ê–¥—Ä–µ—Å</th>
            <th>–ó–∞–∫–∞–∑–æ–≤</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>–ò–≤–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤–∏—á</td>
            <td>+7(999)123-45-67</td>
            <td>ivanov@mail.ru</td>
            <td>—É–ª. –õ–µ–Ω–∏–Ω–∞, 10-5</td>
            <td>3</td>
          </tr>
          <tr>
            <td>2</td>
            <td>–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞</td>
            <td>+7(999)234-56-78</td>
            <td>petrova@yandex.ru</td>
            <td>—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞, 25-12</td>
            <td>2</td>
          </tr>
          <tr>
            <td>3</td>
            <td>–û–û–û "–†–æ–º–∞—à–∫–∞"</td>
            <td>+7(999)345-67-89</td>
            <td>office@romashka.ru</td>
            <td>–ø—Ä. –ú–∏—Ä–∞, 100-305</td>
            <td>5</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ -->
    <div id="tab-employees" class="tab-content" style="display: none;">
      <div class="action-bar">
        <h2>üßë‚Äçüîß –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h2>
        <button id="newEmployeeBtn">‚ûï –ù–∞–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
      </div>
      
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–§–ò–û</th>
            <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–û–∫–ª–∞–¥</th>
            <th>–ó–∞–∫–∞–∑–æ–≤</th>
            <th>–†–µ–π—Ç–∏–Ω–≥</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>–°–º–∏—Ä–Ω–æ–≤ –î–µ–Ω–∏—Å –í–∏–∫—Ç–æ—Ä–æ–≤–∏—á</td>
            <td>–°—Ç–∞—Ä—à–∏–π –∫–ª–∏–Ω–µ—Ä</td>
            <td>+7(999)456-78-90</td>
            <td>45 000 ‚ÇΩ</td>
            <td>12</td>
            <td>4.8</td>
          </tr>
          <tr>
            <td>2</td>
            <td>–ö–æ–∑–ª–æ–≤–∞ –ï–ª–µ–Ω–∞ –ê–Ω–¥—Ä–µ–µ–≤–Ω–∞</td>
            <td>–ö–ª–∏–Ω–µ—Ä</td>
            <td>+7(999)567-89-01</td>
            <td>35 000 ‚ÇΩ</td>
            <td>8</td>
            <td>4.5</td>
          </tr>
          <tr>
            <td>3</td>
            <td>–ú–æ—Ä–æ–∑–æ–≤ –ü–∞–≤–µ–ª –°–µ—Ä–≥–µ–µ–≤–∏—á</td>
            <td>–ö–ª–∏–Ω–µ—Ä</td>
            <td>+7(999)678-90-12</td>
            <td>35 000 ‚ÇΩ</td>
            <td>7</td>
            <td>4.2</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –£—Å–ª—É–≥–∏ -->
    <div id="tab-services" class="tab-content" style="display: none;">
      <div class="action-bar">
        <h2>üß¥ –£—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏</h2>
        <button id="newServiceBtn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
      </div>
      
      <table class="data-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–¶–µ–Ω–∞ (‚ÇΩ/–º¬≤)</th>
            <th>–í—Ä–µ–º—è (–º–∏–Ω)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>–†–µ–≥—É–ª—è—Ä–Ω–∞—è —É–±–æ—Ä–∫–∞</td>
            <td>–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —á–∏—Å—Ç–æ—Ç—ã</td>
            <td>120</td>
            <td>60</td>
          </tr>
          <tr>
            <td>2</td>
            <td>–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞</td>
            <td>–ú–æ–π–∫–∞ –æ–∫–æ–Ω, —Å—Ç–µ–Ω</td>
            <td>250</td>
            <td>180</td>
          </tr>
          <tr>
            <td>3</td>
            <td>–•–∏–º—á–∏—Å—Ç–∫–∞ –∫–æ–≤—Ä–æ–≤</td>
            <td>–ì–ª—É–±–æ–∫–∞—è —á–∏—Å—Ç–∫–∞</td>
            <td>300</td>
            <td>120</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –û—Ç—á—ë—Ç—ã -->
    <div id="tab-reports" class="tab-content" style="display: none;">
      <h2>üìä –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã</h2>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #f8fafc; padding: 24px; border-radius: 24px;">
          <h3 style="margin-bottom: 16px;">–í—ã—Ä—É—á–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
          <div>–Ø–Ω–≤–∞—Ä—å: 420 000 ‚ÇΩ</div>
          <div>–§–µ–≤—Ä–∞–ª—å: 455 000 ‚ÇΩ</div>
          <div>–ú–∞—Ä—Ç: 487 500 ‚ÇΩ</div>
        </div>
        <div style="background: #f8fafc; padding: 24px; border-radius: 24px;">
          <h3 style="margin-bottom: 16px;">–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —É—Å–ª—É–≥</h3>
          <div>–£–±–æ—Ä–∫–∞: 45%</div>
          <div>–•–∏–º—á–∏—Å—Ç–∫–∞: 30%</div>
          <div>–ú–æ–π–∫–∞ –æ–∫–æ–Ω: 25%</div>
        </div>
      </div>

      <div style="background: #dcfce7; padding: 24px; border-radius: 24px; margin-top: 20px;">
        <h3 style="color: #166534;">üí∞ –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏: 35%</h3>
        <p style="margin-top: 8px;">–í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ –æ—Ç—Ä–∞—Å–ª–∏ (25%)</p>
      </div>
    </div>

    <!-- QR-–∫–æ–¥ —Å–µ–∫—Ü–∏—è -->
    <div class="qr-section">
      <button id="qrToggleBtn" class="qr-toggle">üì± –ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞</button>
      <div id="qrContainer" class="qr-container">
        <img src="https://quickchart.io/qr?text=https://Service-Clean.github.io/ServiceClean/&size=220&margin=0&ecLevel=H&color=0b3b5c" alt="QR-–∫–æ–¥">
        <div class="qr-text">üßº ServiceClean</div>
        <div class="qr-link">https://Service-Clean.github.io/ServiceClean/</div>
      </div>
    </div>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <div class="footer">
      <p>¬© 2026 –û–û–û ¬´–°–µ—Ä–≤–∏—Å–ö–ª–∏–Ω¬ª (ServiceClean) ¬∑ –î–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ö–æ–ª–µ—Å–Ω–∏—á–µ–Ω–∫–æ –ê., –ö–æ–±–µ–Ω—è–∫ –ê.</p>
      <p style="margin-top: 8px;">–ì—Ä—É–ø–ø–∞ –ò–°-22 ¬∑ –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å 09.02.07 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</p>
    </div>
  </div>

  <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
  <div id="message" class="message">–°–æ–æ–±—â–µ–Ω–∏–µ</div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ====== –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö SUPABASE ======
    const SUPABASE_URL = 'https://pyojgyasaccwrcdogexx.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_db9nx0GejLB8Cw7XNB3ACg_FmTeP-WX';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // ====== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ======
    let currentUser = null;

    // ====== –í–°–ü–õ–´–í–ê–Æ–©–ï–ï –°–û–û–ë–©–ï–ù–ò–ï ======
    function showMessage(text) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.style.display = 'block';
      setTimeout(() => {
        msg.style.display = 'none';
      }, 2000);
    }

    // ====== –ü–†–û–í–ï–†–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø ======
    async function checkUser() {
      const { data: { user } } = await supabaseClient.auth.getUser();
      currentUser = user;
      document.getElementById('userStatus').innerHTML = user 
        ? `üë§ –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: ${user.email || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}`
        : 'üë§ –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–¥–µ–º–æ-—Ä–µ–∂–∏–º)';
    }

    // ====== –ó–ê–ì–†–£–ó–ö–ê –ó–ê–ö–ê–ó–û–í –ò–ó SUPABASE ======
    async function loadOrders() {
      try {
        const { data, error } = await supabaseClient
          .from('orders')
          .select('*')
          .limit(10);
        
        if (error) {
          console.log('–ò—Å–ø–æ–ª—å–∑—É—é —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–∞–±–ª–∏—Ü—ã –µ—â—ë –Ω–µ—Ç)');
          return;
        }
        
        if (data && data.length > 0) {
          const tbody = document.getElementById('orders-list');
          tbody.innerHTML = data.map(order => `
            <tr>
              <td>${order.id}</td>
              <td>–ö–ª–∏–µ–Ω—Ç #${order.client_id || '‚Äî'}</td>
              <td>${order.service_ids?.length || 0} —É—Å–ª—É–≥</td>
              <td>${order.order_date || '‚Äî'}</td>
              <td>${order.total_price?.toLocaleString() || 0} ‚ÇΩ</td>
              <td><span class="badge badge-info">${order.status || '–Ω–æ–≤—ã–π'}</span></td>
              <td>–°–æ—Ç—Ä—É–¥–Ω–∏–∫ #${order.employee_id || '‚Äî'}</td>
            </tr>
          `).join('');
        }
      } catch (error) {
        console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏, –Ω–æ —ç—Ç–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ');
      }
    }

    // ====== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –í–ö–õ–ê–î–û–ö ======
    function setupTabs() {
      const tabs = document.querySelectorAll('.tab');
      const contents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => {
        tab.addEventListener('click', function(e) {
          e.preventDefault();
          
          // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
          tabs.forEach(t => t.classList.remove('active'));
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞–∂–∞—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ
          this.classList.add('active');
          
          // –ü–æ–ª—É—á–∞–µ–º –∏–º—è –≤–∫–ª–∞–¥–∫–∏
          const tabName = this.getAttribute('data-tab');
          
          // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
          contents.forEach(content => {
            content.style.display = 'none';
          });
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
          const activeContent = document.getElementById(`tab-${tabName}`);
          if (activeContent) {
            activeContent.style.display = 'block';
          }
        });
      });
    }

    // ====== QR-–ö–û–î ======
    function setupQR() {
      const qrBtn = document.getElementById('qrToggleBtn');
      const qrContainer = document.getElementById('qrContainer');

      if (qrBtn) {
        qrBtn.addEventListener('click', function(e) {
          e.preventDefault();
          qrContainer.classList.toggle('show');
          this.textContent = qrContainer.classList.contains('show') 
            ? 'üì± –°–∫—Ä—ã—Ç—å QR-–∫–æ–¥' 
            : 'üì± –ü–æ–∫–∞–∑–∞—Ç—å QR-–∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞';
        });
      }
    }

    // ====== –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô ======
    function setupActionButtons() {
      const newOrderBtn = document.getElementById('newOrderBtn');
      if (newOrderBtn) {
        newOrderBtn.addEventListener('click', (e) => {
          e.preventDefault();
          showMessage('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
        });
      }

      const newClientBtn = document.getElementById('newClientBtn');
      if (newClientBtn) {
        newClientBtn.addEventListener('click', (e) => {
          e.preventDefault();
          showMessage('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
        });
      }

      const newEmployeeBtn = document.getElementById('newEmployeeBtn');
      if (newEmployeeBtn) {
        newEmployeeBtn.addEventListener('click', (e) => {
          e.preventDefault();
          showMessage('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
        });
      }

      const newServiceBtn = document.getElementById('newServiceBtn');
      if (newServiceBtn) {
        newServiceBtn.addEventListener('click', (e) => {
          e.preventDefault();
          showMessage('–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
        });
      }
    }

    // ====== –í–´–•–û–î ======
    function setupAuth() {
      const authBtn = document.getElementById('authButton');
      if (authBtn) {
        authBtn.addEventListener('click', async function(e) {
          e.preventDefault();
          if (currentUser) {
            await supabaseClient.auth.signOut();
            checkUser();
            showMessage('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã');
          } else {
            showMessage('–í—ã –≤ –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ');
          }
        });
      }
    }

    // ====== –ó–ê–ü–£–°–ö –í–°–ï–ì–û ======
    document.addEventListener('DOMContentLoaded', function() {
      console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...');
      setupTabs();
      setupQR();
      setupActionButtons();
      setupAuth();
      checkUser();
      loadOrders();
    });
  </script>
</body>
</html>
